
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1//EN" "http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg-flat.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>
      tensor projection in nLab
  </title>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="/stylesheets/instiki.css?1660229990" media="all" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/mathematics.css?1660229990" media="all" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/syntax.css?1660229990" media="all" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/nlab.css?1660229990" media="all" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/dreampulse/computer-modern-web-font@master/fonts.css"/>

  <style type="text/css">
    h1#pageName, div.info, .newWikiWord a, a.existingWikiWord, .newWikiWord a:hover, [actiontype="toggle"]:hover, #TextileHelp h3 {
      color: #226622;
    }
    a:visited.existingWikiWord {
      color: #164416;
    }
    
    
  </style>
  
  <style type="text/css"><!--/*--><![CDATA[/*><!--*/
    .toc ul {margin: 0; padding: 0;}
.toc ul ul {margin: 0; padding: 0 0 0 10px;}
.toc li > p {margin: 0}
.toc ul li {list-style-type: none; position: relative;}
.toc div {border-top:1px dotted #ccc;}
.rightHandSide h2 {font-size: 1.5em;color:#008B26}
table.plaintable {
    border-collapse:collapse;
    margin-left:30px;
    border:0;
}
.plaintable td {border:1px solid #000; padding: 3px;}
.plaintable th {padding: 3px;}
.plaintable caption {
    font-weight: bold;
    font-size:1.1em;
    text-align:center;
    margin-left:30px;
}
    
   
/* Query boxes for questioning and answering mechanism */
div.query{
background: #f6fff3;
border: solid #ce9;
border-width: 2px 1px;
padding: 0 1em;
margin: 0 1em;
max-height: 20em;
overflow: auto;
}

/* Standout boxes for putting important text */
div.standout{
background: #fff1f1;
border: solid black;
border-width: 2px 1px;
padding: 0 1em;
margin: 0 1em;
overflow: auto;
}

/* Icon for links to n-category arXiv documents 
 (commented out for now i.e. disabled)
a[href*="http://arxiv.org/"] {
  background-image: url(../files/arXiv_icon.gif);
  background-repeat: no-repeat;
  background-position: right bottom;
     padding-right: 22px;
  } */
    
/* Icon for links to n-category cafe posts (disabled) 
a[href*="http://golem.ph.utexas.edu/category"] {
  background-image: url(../files/n-cafe_5.gif);
  background-repeat: no-repeat;
  background-position: right bottom;
     padding-right: 25px;
  } */

/* Icon for links to pdf files (disabled)
a[href$=".pdf"] {
  background-image: url(../files/pdficon_small.gif);
  background-repeat: no-repeat;
  background-position: right bottom;
     padding-right: 25px;
  } */

/* Icon for links to pages, etc. -inside- pdf files (disabled)
a[href*=".pdf#"] {
  background-image: url(../files/pdf_entry.gif);
  background-repeat: no-repeat;
  background-position: right bottom;
     padding-right: 25px;
  } */

a.existingWikiWord {
color: #226622;
}

a.existingWikiWord:visited {
color: #226622;
}


a.existingWikiWord[title] {
border: 0px;
color: #aa0505;
text-decoration: none;
}
    
a.existingWikiWord[title]:visited {
border: 0px;
color: #551111;
text-decoration: none;
}

a[href^="http://"] {
border: 0px;
color: #003399;
}

a[href^="http://"]:visited {
border: 0px;
color: #330066;
}

a[href^="https://"] {
border: 0px;
color: #003399;
}

a[href^="https://"]:visited {
border: 0px;
color: #330066;
}

div.dropDown .hide {
display: none;
}

div.dropDown:hover .hide {
display:block;
}

div.clickDown .hide {
display: none;
}

div.clickDown:focus {
outline:none;
}

div.clickDown:focus .hide, div.clickDown:hover .hide {
display: block;
}

div.clickDown .clickToReveal, div.clickDown:focus .clickToHide {
display:block;
}

div.clickDown:focus .clickToReveal, div.clickDown .clickToHide {
display:none;
}

div.clickDown .clickToReveal:after {
content: "A(Hover to reveal, click to "hold")";
font-size: 60%;
}

div.clickDown .clickToHide:after {
content: "A(Click to hide)";
font-size: 60%;
}
div.clickDown .clickToHide, div.clickDown .clickToReveal {
white-space: pre-wrap;
}

.un_theorem, .num_theorem, .un_lemma, .num_lemma, .un_prop, .num_prop, .un_cor, .num_cor, .un_defn, .num_defn, .un_example, .num_example, .un_note, .num_note, .un_remark, .num_remark {
margin-left: 1em;
}

span.theorem_label {
margin-left: -1em;
}
.proof span.theorem_label {
margin-left: 0em;
}
:target {
    background-color: #BBBBBB;
    border-radius: 5pt;
}

  /*]]>*/--></style>
  <script src="/javascripts/prototype.js?1660229990" type="text/javascript"></script>
<script src="/javascripts/effects.js?1660229990" type="text/javascript"></script>
<script src="/javascripts/dragdrop.js?1660229990" type="text/javascript"></script>
<script src="/javascripts/controls.js?1660229990" type="text/javascript"></script>
<script src="/javascripts/application.js?1660229990" type="text/javascript"></script>
  <script src="/javascripts/page_helper.js?1660229990" type="text/javascript"></script>
  <script src="/javascripts/thm_numbering.js?1660229990" type="text/javascript"></script>
  
  <script type="text/x-mathjax-config">
  <!--//--><![CDATA[//><!--
    MathJax.Ajax.config.path["Contrib"] = "/MathJax";
    MathJax.Hub.Config({
      MathML: { useMathMLspacing: true },
      "HTML-CSS": { scale: 90,
                    extensions: ["handle-floats.js"]
      }
    });
    MathJax.Hub.Queue( function () {
       var fos = document.getElementsByTagName('foreignObject');
       for (var i = 0; i < fos.length; i++) {
         MathJax.Hub.Typeset(fos[i]);
       }
    });
  //--><!]]>
  </script>

  <script type="text/javascript">
    <!--//--><![CDATA[//><!--
    window.addEventListener("DOMContentLoaded", function () {
      var div = document.createElement('div');
      var math = document.createElementNS('http://www.w3.org/1998/Math/MathML', 'math');
      document.body.appendChild(div);
      div.appendChild(math);
    // Test for MathML support comparable to WebKit version https://trac.webkit.org/changeset/203640 or higher.
      div.setAttribute('style', 'font-style: italic');
      var mathml_unsupported = !(window.getComputedStyle(div.firstChild).getPropertyValue('font-style') === 'normal');
      div.parentNode.removeChild(div);
      if (mathml_unsupported) {
        // MathML does not seem to be supported...
        var s = document.createElement('script');
        s.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=MML_HTMLorMML-full";
        document.querySelector('head').appendChild(s);
      } else {
        document.head.insertAdjacentHTML("beforeend", '<style>svg[viewBox] {max-width: 100%}</style>');
      }
    });
    //--><!]]>
  </script>

  	<link href="https://ncatlab.org/nlab/atom_with_headlines" rel="alternate" title="Atom with headlines" type="application/atom+xml" />
  	<link href="https://ncatlab.org/nlab/atom_with_content" rel="alternate" title="Atom with full content" type="application/atom+xml" />
  <script type="text/javascript">
  document.observe("dom:loaded", function() {
    generateThmNumbers();
  });
  </script>
</head>

<body>

<div id="Container">
<div id="Content">
  <h1 id="pageName">
    <span style="float: left; margin: 0.5em 0.25em -0.25em 0">
      <svg xmlns="http://www.w3.org/2000/svg" width="1.872em" height="1.8em" viewBox="0 0 190 181">
        <path fill="#226622" d="M72.8 145c-1.6 17.3-15.7 10-23.6 20.2-5.6 7.3 4.8 15 11.4 15 11.5-.2 19-13.4 26.4-20.3 3.3-3 8.2-4 11.2-7.2a14 14 0 0 0 2.9-11.1c-1.4-9.6-12.4-18.6-16.9-27.2-5-9.6-10.7-27.4-24.1-27.7-17.4-.3-.4 26 4.7 30.7 2.4 2.3 5.4 4.1 7.3 6.9 1.6 2.3 2.1 5.8-1 7.2-5.9 2.6-12.4-6.3-15.5-10-8.8-10.6-15.5-23-26.2-31.8-5.2-4.3-11.8-8-18-3.7-7.3 4.9-4.2 12.9.2 18.5a81 81 0 0 0 30.7 23c3.3 1.5 12.8 5.6 10 10.7-2.5 5.2-11.7 3-15.6 1.1-8.4-3.8-24.3-21.3-34.4-13.7-3.5 2.6-2.3 7.6-1.2 11.1 2.8 9 12.2 17.2 20.9 20.5 17.3 6.7 34.3-8 50.8-12.1z"/>
        <path fill="#a41e32" d="M145.9 121.3c-.2-7.5 0-19.6-4.5-26-5.4-7.5-12.9-1-14.1 5.8-1.4 7.8 2.7 14.1 4.8 21.3 3.4 12 5.8 29-.8 40.1-3.6-6.7-5.2-13-7-20.4-2.1-8.2-12.8-13.2-15.1-1.9-2 9.7 9 21.2 12 30.1 1.2 4 2 8.8 6.4 10.3 6.9 2.3 13.3-4.7 17.7-8.8 12.2-11.5 36.6-20.7 43.4-36.4 6.7-15.7-13.7-14-21.3-7.2-9.1 8-11.9 20.5-23.6 25.1 7.5-23.7 31.8-37.6 38.4-61.4 2-7.3-.8-29.6-13-19.8-14.5 11.6-6.6 37.6-23.3 49.2z"/>
        <path fill="#193c78" d="M86.3 47.5c0-13-10.2-27.6-5.8-40.4 2.8-8.4 14.1-10.1 17-1 3.8 11.6-.3 26.3-1.8 38 11.7-.7 10.5-16 14.8-24.3 2.1-4.2 5.7-9.1 11-6.7 6 2.7 7.4 9.2 6.6 15.1-2.2 14-12.2 18.8-22.4 27-3.4 2.7-8 6.6-5.9 11.6 2 4.4 7 4.5 10.7 2.8 7.4-3.3 13.4-16.5 21.7-16 14.6.7 12 21.9.9 26.2-5 1.9-10.2 2.3-15.2 3.9-5.8 1.8-9.4 8.7-15.7 8.9-6.1.1-9-6.9-14.3-9-14.4-6-33.3-2-44.7-14.7-3.7-4.2-9.6-12-4.9-17.4 9.3-10.7 28 7.2 35.7 12 2 1.1 11 6.9 11.4 1.1.4-5.2-10-8.2-13.5-10-11.1-5.2-30-15.3-35-27.3-2.5-6 2.8-13.8 9.4-13.6 6.9.2 13.4 7 17.5 12C70.9 34 75 43.8 86.3 47.4z"/>
      </svg>
    </span>
      <span class="webName">nLab</span>
      tensor projection
  </h1>



<div class="navigation">
    <span class="skipNav"><a href='#navEnd'>Skip the Navigation Links</a> | </span>
    <span style="display:inline-block; width: 0.3em;"></span>
    <a href="/nlab/show/HomePage" accesskey="H" title="Home page">Home Page</a> |
    <a href="/nlab/all_pages" accesskey="A" title="List of all pages">All Pages</a> |
    <a href="/nlab/latest_revisions" accesskey="U" title="Latest edits and page creations">Latest Revisions</a> |
    <a href="https://nforum.ncatlab.org/discussion/10661/#Item_60" title="Discuss this page in its dedicated thread on the nForum" style="color: black">Discuss this page</a> |
<form accept-charset="utf-8" action="/nlab/search" id="navigationSearchForm" method="get">      <fieldset class="search"><input type="text" id="searchField" name="query" value="Search"
             style="display:inline-block; float: left;"
             onfocus="this.value == 'Search' ? this.value = '' : true"
             onblur="this.value == '' ? this.value = 'Search' : true" /></fieldset>
</form>  <span id='navEnd'></span>
</div>






<div id="revision">
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:svg="http://www.w3.org/2000/svg" xml:lang="en" lang="en">
<head><meta http-equiv="Content-type" content="application/xhtml+xml;charset=utf-8" /><title></title></head>
<body>
<h2 id="idea">Idea</h2>

<p>How do you type check <a class="existingWikiWord" href="/nlab/show/linear+logic">MILL</a>, but with projections rather than matching to eliminate <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>⊗</mo></mrow><annotation encoding="application/x-tex">\otimes</annotation></semantics></math>? <a href="#Shulman">Mike Shulman</a> gave one such system, but its type-checking algorithm requires two passes (if this algorithm were incorporated into the rules, there would be an extra intermediate judgment with “activeness” annotations on the types), and doesn’t handle additional type constructors such as <a class="existingWikiWord" href="/nlab/show/linear+implication">linear implication</a>.</p>

<p>This page is intended to give algorithmic rules for a system with tensor projections and linear implication, but at present it is unverified and its interpretation into monoidal categories is unclear.</p>

<h2 id="judgment_form_notations">Judgment form, Notations</h2>

<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>t</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>T</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><mi>U</mi><mo>′</mo><mo>⊆</mo><mi>Γ</mi><mo>′</mo></mrow><annotation encoding="application/x-tex">U \subseteq \Gamma \vdash t\,:\,T\,\boxtimes\,U' \subseteq \Gamma'</annotation></semantics></math></p>

<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math>, <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi></mrow><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math>, and <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math> are inputs; <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math>, <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>U</mi><mo>′</mo></mrow><annotation encoding="application/x-tex">U'</annotation></semantics></math>, and <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi><mo>′</mo></mrow><annotation encoding="application/x-tex">\Gamma'</annotation></semantics></math> are outputs.</p>

<p>The observation mentioned in <a href="#Allais">Allais</a> motivating the use of “<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>⊠</mo></mrow><annotation encoding="application/x-tex">\boxtimes</annotation></semantics></math>” was that a term generally doesn’t use all the resources it’s given, so the rest are passed back out, tensored with the result type.</p>

<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi></mrow><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math> and <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi><mo>′</mo></mrow><annotation encoding="application/x-tex">\Gamma'</annotation></semantics></math> are <a class="existingWikiWord" href="/nlab/show/contexts">contexts</a> with some natural number of semicolon “scope” delimiters. <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math> and <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>U</mi><mo>′</mo></mrow><annotation encoding="application/x-tex">U'</annotation></semantics></math> are “usage” sets, which are subsets of the (domains of the) respective contexts. In <a href="#Allais">Allais</a>, the usage sets are represented as bit vectors (which is a fine way to implement them). Unlike <a href="#Allais">Allais</a>, the usage before and after are for <em>different</em> contexts, because type checking a term generally adds projections to the context as potentially-consumed resources.</p>

<p>The purpose of delimited scopes in the context is to remember by when we must’ve consumed tensor projections. Currently, only lambda adds a scope delimiter. The current algorithm puts projections in the outermost scope it can get away with. This approach will not work when adding additive connectives.</p>

<p>In the rules, I implicitly coerce a context to the usage set of its entire domain. The abbreviation <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>Γ</mi><mo>↦</mo><mi>Γ</mi><mo>′</mo><mo stretchy="false">)</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">(\Gamma \mapsto \Gamma')U</annotation></semantics></math> “weakens” <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math> to include all entries in <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi><mo>′</mo></mrow><annotation encoding="application/x-tex">\Gamma'</annotation></semantics></math> but not <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi></mrow><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math>. Set theoretically speaking: <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>Γ</mi><mo>↦</mo><mi>Γ</mi><mo>′</mo><mo stretchy="false">)</mo><mi>U</mi><mo>≔</mo><mi>U</mi><mo>∪</mo><mo stretchy="false">(</mo><mi>Γ</mi><mo>′</mo><mo>∖</mo><mi>Γ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\Gamma \mapsto \Gamma')U \coloneqq U \cup (\Gamma' \setminus \Gamma)</annotation></semantics></math>. “<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Δ</mi></mrow><annotation encoding="application/x-tex">\Delta</annotation></semantics></math>” and variants are used as metavariables for contexts <em>without any delimiters</em>.</p>

<p>Some important (intended) properties of the judgment form are that if <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>t</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>T</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><mi>U</mi><mo>′</mo><mo>⊆</mo><mi>Γ</mi><mo>′</mo></mrow><annotation encoding="application/x-tex">U \subseteq \Gamma \vdash t\,:\,T\,\boxtimes\,U' \subseteq \Gamma'</annotation></semantics></math>, then:</p>

<ul>
<li><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi></mrow><annotation encoding="application/x-tex">U \subseteq \Gamma</annotation></semantics></math> and <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>U</mi><mo>′</mo><mo>⊆</mo><mi>Γ</mi><mo>′</mo></mrow><annotation encoding="application/x-tex">U' \subseteq \Gamma'</annotation></semantics></math></li>

<li><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi></mrow><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math> and <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi><mo>′</mo></mrow><annotation encoding="application/x-tex">\Gamma'</annotation></semantics></math> have the same number of delimiters.</li>

<li><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi><mo>′</mo></mrow><annotation encoding="application/x-tex">\Gamma'</annotation></semantics></math> includes all the entries of <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi></mrow><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math>, in the same scopes. (So in particular, <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi><mo>⊆</mo><mi>Γ</mi><mo>′</mo></mrow><annotation encoding="application/x-tex">\Gamma \subseteq \Gamma'</annotation></semantics></math>.)</li>

<li><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>U</mi><mo>′</mo><mo>⊆</mo><mo stretchy="false">(</mo><mi>Γ</mi><mo>↦</mo><mi>Γ</mi><mo>′</mo><mo stretchy="false">)</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">U' \subseteq (\Gamma \mapsto \Gamma')U</annotation></semantics></math></li>
</ul>

<p>Note that the context grows while the usage shrinks. Erm, I guess these usage sets are the sets of resources <em>not</em> used (and thus available). <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>Γ</mi><mo>↦</mo><mi>Γ</mi><mo>′</mo><mo stretchy="false">)</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">(\Gamma \mapsto \Gamma')U</annotation></semantics></math> should be understood as the <em>actual</em> usage indicated by <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi></mrow><annotation encoding="application/x-tex">U \subseteq \Gamma</annotation></semantics></math>, in light of the additional resources in <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi><mo>′</mo></mrow><annotation encoding="application/x-tex">\Gamma'</annotation></semantics></math>. So as the type checker proceeds, more resources are known of, but fewer remain available.</p>

<h2 id="generators_and_functions">Generators and Functions</h2>

<p>There are generator morphisms, which can be used any number of times. <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>f</mi><mo>∈</mo><mi>𝒢</mi><mo stretchy="false">(</mo><mi>A</mi><mo>;</mo><mover><mi>B</mi><mo>→</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f \in \mathcal{G}(A;\overrightarrow{B})</annotation></semantics></math> means you can get <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>f</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mo>⊸</mo><mover><mi>B</mi><mo>→</mo></mover></mrow><annotation encoding="application/x-tex">f\,:\,A \multimap \overrightarrow{B}</annotation></semantics></math> whenever you want.</p>

<p>Functions take exactly one argument, and have one or more results. Semantically, the results are tensored (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>⊗</mo></mrow><annotation encoding="application/x-tex">\otimes</annotation></semantics></math>) together. Following <a href="#Shulman">Shulman</a>, multiple results are accessed using “generalized Sweedler notation”. For example, if <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(a)</annotation></semantics></math> has two results, they are typically written as <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><msub><mi>f</mi> <mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f_{(1)}(a)</annotation></semantics></math> and <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><msub><mi>f</mi> <mrow><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f_{(2)}(a)</annotation></semantics></math>. Using <em>both</em> results is a <em>single</em> use of linear implication elimination. This is actually the only way to use tensor projections, currently. Combining it with function application was purely a matter of convenience, and is probably a bad idea, for adding more connectives.</p>

<h2 id="rules">Rules</h2>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mfrac><mrow><mi>t</mi><mo>:</mo><mi>T</mi><mo>∈</mo><mi>U</mi></mrow><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>t</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>T</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><mi>U</mi><mo>∖</mo><mo stretchy="false">{</mo><mi>t</mi><mo stretchy="false">}</mo><mo>⊆</mo><mi>Γ</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{t:T \in U}{U \subseteq \Gamma \vdash t\,:\,T\,\boxtimes\,U \setminus \{t\} \subseteq \Gamma}</annotation></semantics></math></div>
<p>Yes, you get <em>terms</em> out of the context, not just variables. For now, the only terms that end up in the context are variables and tensor projections. <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>t</mi><mo>:</mo><mi>T</mi><mo stretchy="false">)</mo><mo>∈</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">(t:T) \in U</annotation></semantics></math> really means <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>t</mi><mo>:</mo><mi>T</mi><mo stretchy="false">)</mo><mo>∈</mo><mi>Γ</mi></mrow><annotation encoding="application/x-tex">(t:T) \in \Gamma</annotation></semantics></math> and <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>t</mi><mo>∈</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">t \in U</annotation></semantics></math>, since the type is stored in <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Γ</mi></mrow><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math>.</p>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mrow><mtable displaystyle="true" rowspacing="1.0ex"><mtr><mtd><mfrac><mrow><mi>f</mi><mo>∈</mo><mi>𝒢</mi><mo stretchy="false">(</mo><mi>A</mi><mo>;</mo><mover><mi>B</mi><mo>→</mo></mover><mo stretchy="false">)</mo></mrow><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>f</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mo>⊸</mo><mover><mi>B</mi><mo>→</mo></mover><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><mi>U</mi><mo>⊆</mo><mi>Γ</mi></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mrow></mrow><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mo stretchy="false">(</mo><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mstyle mathvariant="bold"><mn>1</mn></mstyle><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><mi>U</mi><mo>⊆</mo><mi>Γ</mi></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>c</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mstyle mathvariant="bold"><mn>1</mn></mstyle><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>1</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>1</mn></msub><mspace width="2em"></mspace><msub><mi>U</mi> <mn>1</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>1</mn></msub><mo>⊢</mo><mi>t</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>T</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>2</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>2</mn></msub></mrow><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>c</mi><mo>;</mo><mspace width="thinmathspace"></mspace><mi>t</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>T</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>2</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>2</mn></msub></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>a</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>1</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>1</mn></msub><mspace width="2em"></mspace><msub><mi>U</mi> <mn>1</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>1</mn></msub><mo>⊢</mo><mi>b</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>2</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>2</mn></msub></mrow><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mo stretchy="false">(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mo>⊗</mo><mi>B</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>2</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>2</mn></msub></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mrow></mrow><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>π</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mo stretchy="false">(</mo><mi>A</mi><mo>⊗</mo><mi>B</mi><mo stretchy="false">)</mo><mo>⊸</mo><mo stretchy="false">(</mo><mi>A</mi><mo>,</mo><mi>B</mi><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><mi>U</mi><mo>⊆</mo><mi>Γ</mi></mrow></mfrac></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\begin{gathered}
\frac{f \in \mathcal{G}(A;\overrightarrow{B})}
{U \subseteq \Gamma \vdash f\,:\,A \multimap \overrightarrow{B}\,\boxtimes\,U \subseteq \Gamma} \\
\\
\frac{}{U \subseteq \Gamma \vdash ()\,:\,\mathbf{1}\,\boxtimes\,U \subseteq \Gamma} \\
\\
\frac{U \subseteq \Gamma \vdash c\,:\,\mathbf{1}\,\boxtimes\,U_1 \subseteq \Gamma_1 \qquad
U_1 \subseteq \Gamma_1 \vdash t\,:\,T\,\boxtimes\,U_2 \subseteq \Gamma_2}
{U \subseteq \Gamma \vdash c;\,t\,:\,T\,\boxtimes\,U_2 \subseteq \Gamma_2} \\
\\
\frac{U \subseteq \Gamma \vdash a\,:\,A\,\boxtimes\,U_1 \subseteq \Gamma_1 \qquad
U_1 \subseteq \Gamma_1 \vdash b\,:\,B\,\boxtimes\,U_2 \subseteq \Gamma_2}
{U \subseteq \Gamma \vdash (a,b)\,:\,A \otimes B\,\boxtimes\,U_2 \subseteq \Gamma_2} \\
\\
\frac{}{U \subseteq \Gamma \vdash \pi\,:\,(A \otimes B) \multimap (A,B)\,\boxtimes\,U \subseteq \Gamma}
\end{gathered}
</annotation></semantics></math></div>
<p>Yeah, that’s tensor elim now. Kind of funky. It turns out this rule is redundant: you can also use <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>λ</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊗</mo><mi>B</mi><mo>.</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\lambda x:A \otimes B.x)</annotation></semantics></math>.</p>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mfrac><mrow><mi>U</mi><mo>∪</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo><mo>⊆</mo><mi>Γ</mi><mo>;</mo><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>b</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><msub><mi>B</mi> <mn>1</mn></msub><mo>⊗</mo><mi>…</mi><mo>⊗</mo><msub><mi>B</mi> <mi>n</mi></msub><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><mi>U</mi><mo>′</mo><mo>⊆</mo><mi>Γ</mi><mo>′</mo><mo>;</mo><mi>Δ</mi><mspace width="2em"></mspace><mi>U</mi><mo>′</mo><mo>∩</mo><mi>Δ</mi><mo>=</mo><mi>∅</mi></mrow><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>λ</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>b</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mo>⊸</mo><mo stretchy="false">(</mo><msub><mi>B</mi> <mn>1</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>B</mi> <mi>n</mi></msub><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><mi>U</mi><mo>′</mo><mo>⊆</mo><mi>Γ</mi><mo>′</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{U \cup \{x\} \subseteq \Gamma;x:A \vdash b\,:\,B_1 \otimes \dots \otimes B_n\,\boxtimes\,U' \subseteq \Gamma';\Delta \qquad
U' \cap \Delta = \emptyset}
{U \subseteq \Gamma \vdash \lambda x:A.b\,:\,A \multimap (B_1,\dots,B_n)\,\boxtimes\,U' \subseteq \Gamma'}
</annotation></semantics></math></div>
<p>There is a new scope for checking the body, which starts out with just the bound variable. When done checking, there’s generally more stuff in it. Currently, that would only be tensor projections. In any case, everything in the new scope must’ve been consumed.</p>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mfrac><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>f</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mo>⊸</mo><mi>B</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>1</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>1</mn></msub><mspace width="2em"></mspace><msub><mi>U</mi> <mn>1</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>1</mn></msub><mo>⊢</mo><mi>a</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>2</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>2</mn></msub></mrow><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>f</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>2</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>2</mn></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{U \subseteq \Gamma \vdash f\,:\,A \multimap B\,\boxtimes\,U_1 \subseteq \Gamma_1 \qquad
U_1 \subseteq \Gamma_1 \vdash a\,:\,A\,\boxtimes\,U_2 \subseteq \Gamma_2}
{U \subseteq \Gamma \vdash f(a)\,:\,B\,\boxtimes\,U_2 \subseteq \Gamma_2}
</annotation></semantics></math></div>
<p>That’s the <em>nice</em> application rule, for when there’s one result. Now for the <em>nasty</em> ones…</p>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mfrac><mtable displaystyle="false" rowspacing="0.5ex" columnalign="left"><mtr><mtd><msub><mi>f</mi> <mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>∉</mo><mi>Γ</mi></mtd></mtr> <mtr><mtd><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>f</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mo>⊸</mo><mover><mi>B</mi><mo>→</mo></mover><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>1</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>1</mn></msub></mtd></mtr> <mtr><mtd><msub><mi>U</mi> <mn>1</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>1</mn></msub><mo>⊢</mo><mi>a</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>2</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>2</mn></msub></mtd></mtr> <mtr><mtd><mo stretchy="false">|</mo><mover><mi>B</mi><mo>→</mo></mover><mo stretchy="false">|</mo><mo>&gt;</mo><mn>1</mn><mspace width="2em"></mspace><mn>0</mn><mo>&lt;</mo><mi>i</mi><mo>≤</mo><mo stretchy="false">|</mo><mover><mi>B</mi><mo>→</mo></mover><mo stretchy="false">|</mo></mtd></mtr> <mtr><mtd><msub><mi>U</mi> <mi>d</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mi>Γ</mi><mo>↦</mo><msub><mi>Γ</mi> <mn>2</mn></msub><mo stretchy="false">)</mo><mi>U</mi><mo>∖</mo><msub><mi>U</mi> <mn>2</mn></msub></mtd></mtr> <mtr><mtd><msub><mi>Γ</mi> <mn>2</mn></msub><mo>=</mo><msub><mi>Γ</mi> <mi>l</mi></msub><mo>;</mo><mi>Δ</mi><mo>;</mo><msub><mi>Γ</mi> <mi>r</mi></msub></mtd></mtr> <mtr><mtd><msub><mi>U</mi> <mi>d</mi></msub><mo>∩</mo><msub><mi>Γ</mi> <mi>r</mi></msub><mo>=</mo><mi>∅</mi><mspace width="2em"></mspace><msub><mi>U</mi> <mi>d</mi></msub><mo>∩</mo><mi>Δ</mi><mo>≠</mo><mi>∅</mi></mtd></mtr> <mtr><mtd><msub><mi>Γ</mi> <mn>3</mn></msub><mo>=</mo><msub><mi>Γ</mi> <mi>l</mi></msub><mo>;</mo><mi>Δ</mi><mo>,</mo><mover><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>:</mo><mi>B</mi></mrow><mo>→</mo></mover><mo>;</mo><msub><mi>Γ</mi> <mi>r</mi></msub></mtd></mtr> <mtr><mtd><msub><mi>U</mi> <mn>3</mn></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>Γ</mi> <mn>2</mn></msub><mo>↦</mo><msub><mi>Γ</mi> <mn>3</mn></msub><mo stretchy="false">)</mo><msub><mi>U</mi> <mn>2</mn></msub><mo>∖</mo><mo stretchy="false">{</mo><msub><mi>f</mi> <mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mtd></mtr></mtable><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><msub><mi>f</mi> <mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><msub><mi>B</mi> <mi>i</mi></msub><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>3</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>3</mn></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\begin{array}{l}f_{(i)}(a) \notin \Gamma \\
U \subseteq \Gamma \vdash f\,:\,A \multimap \overrightarrow{B}\,\boxtimes\,U_1 \subseteq \Gamma_1 \\
U_1 \subseteq \Gamma_1 \vdash a\,:\,A\,\boxtimes\,U_2 \subseteq \Gamma_2 \\
|\overrightarrow{B}| \gt 1 \qquad 0 \lt i \leq |\overrightarrow{B}| \\
U_d = (\Gamma \mapsto \Gamma_2)U \setminus U_2 \\
\Gamma_2 = \Gamma_l;\Delta;\Gamma_r \\
U_d \cap \Gamma_r = \emptyset \qquad U_d \cap \Delta \neq \emptyset \\
\Gamma_3 = \Gamma_l;\Delta,\overrightarrow{f(a):B};\Gamma_r \\
U_3 = (\Gamma_2 \mapsto \Gamma_3)U_2 \setminus \{f_{(i)}(a)\}\end{array}}
{U \subseteq \Gamma \vdash f_{(i)}(a)\,:\,B_i\,\boxtimes\,U_3 \subseteq \Gamma_3}
</annotation></semantics></math></div><div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mspace width="thickmathspace"></mspace></mrow><annotation encoding="application/x-tex">\;</annotation></semantics></math></div><div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mfrac><mtable displaystyle="false" rowspacing="0.5ex" columnalign="left"><mtr><mtd><msubsup><mi>f</mi> <mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow> <mi>u</mi></msubsup><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>∉</mo><mi>Γ</mi></mtd></mtr> <mtr><mtd><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><mi>f</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mo>⊸</mo><mover><mi>B</mi><mo>→</mo></mover><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>1</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>1</mn></msub></mtd></mtr> <mtr><mtd><msub><mi>U</mi> <mn>1</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>1</mn></msub><mo>⊢</mo><mi>a</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>2</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>2</mn></msub></mtd></mtr> <mtr><mtd><mo stretchy="false">|</mo><mover><mi>B</mi><mo>→</mo></mover><mo stretchy="false">|</mo><mo>&gt;</mo><mn>1</mn><mspace width="2em"></mspace><mn>0</mn><mo>&lt;</mo><mi>i</mi><mo>≤</mo><mo stretchy="false">|</mo><mover><mi>B</mi><mo>→</mo></mover><mo stretchy="false">|</mo></mtd></mtr> <mtr><mtd><mo stretchy="false">(</mo><mi>Γ</mi><mo>↦</mo><msub><mi>Γ</mi> <mn>2</mn></msub><mo stretchy="false">)</mo><mi>U</mi><mo>∖</mo><msub><mi>U</mi> <mn>2</mn></msub><mo>=</mo><mi>∅</mi></mtd></mtr> <mtr><mtd><msub><mi>Γ</mi> <mn>2</mn></msub><mo>=</mo><msub><mi>Δ</mi> <mi>l</mi></msub><mo>;</mo><msub><mi>Γ</mi> <mi>r</mi></msub></mtd></mtr> <mtr><mtd><msub><mi>Γ</mi> <mn>3</mn></msub><mo>=</mo><msub><mi>Δ</mi> <mi>l</mi></msub><mo>,</mo><mover><mrow><msup><mi>f</mi> <mi>u</mi></msup><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>:</mo><mi>B</mi></mrow><mo>→</mo></mover><mo>;</mo><msub><mi>Γ</mi> <mi>r</mi></msub></mtd></mtr> <mtr><mtd><msub><mi>U</mi> <mn>3</mn></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>Γ</mi> <mn>2</mn></msub><mo>↦</mo><msub><mi>Γ</mi> <mn>3</mn></msub><mo stretchy="false">)</mo><msub><mi>U</mi> <mn>2</mn></msub><mo>∖</mo><mo stretchy="false">{</mo><msubsup><mi>f</mi> <mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow> <mi>u</mi></msubsup><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mtd></mtr></mtable><mrow><mi>U</mi><mo>⊆</mo><mi>Γ</mi><mo>⊢</mo><msubsup><mi>f</mi> <mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow> <mi>u</mi></msubsup><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><msub><mi>B</mi> <mi>i</mi></msub><mspace width="thinmathspace"></mspace><mo>⊠</mo><mspace width="thinmathspace"></mspace><msub><mi>U</mi> <mn>3</mn></msub><mo>⊆</mo><msub><mi>Γ</mi> <mn>3</mn></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\begin{array}{l}f^u_{(i)}(a) \notin \Gamma \\
U \subseteq \Gamma \vdash f\,:\,A \multimap \overrightarrow{B}\,\boxtimes\,U_1 \subseteq \Gamma_1 \\
U_1 \subseteq \Gamma_1 \vdash a\,:\,A\,\boxtimes\,U_2 \subseteq \Gamma_2 \\
|\overrightarrow{B}| \gt 1 \qquad 0 \lt i \leq |\overrightarrow{B}| \\
(\Gamma \mapsto \Gamma_2)U \setminus U_2 = \emptyset \\
\Gamma_2 = \Delta_l;\Gamma_r \\
\Gamma_3 = \Delta_l,\overrightarrow{f^u(a):B};\Gamma_r \\
U_3 = (\Gamma_2 \mapsto \Gamma_3)U_2 \setminus \{f^u_{(i)}(a)\}\end{array}}
{U \subseteq \Gamma \vdash f^u_{(i)}(a)\,:\,B_i\,\boxtimes\,U_3 \subseteq \Gamma_3}
</annotation></semantics></math></div>
<p>Whew. These rules add tensor projections of a function application to the context, the first time the application is encountered in a given scope. There are two rules because if the application doesn’t consume any resources, there’s generally an ambiguity between multiple instances of the application, so we add a “label” to disambiguate. <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math> is the label metavariable. This labeling idea is from <a href="#Shulman">Shulman</a>. See there for a discussion of the problem.</p>

<p>In the rule mentioning <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><msub><mi>U</mi> <mi>d</mi></msub></mrow><annotation encoding="application/x-tex">U_d</annotation></semantics></math>, <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><msub><mi>U</mi> <mi>d</mi></msub></mrow><annotation encoding="application/x-tex">U_d</annotation></semantics></math> is the set of resources consumed by the application. That is, both the function and argument. The premise <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><msub><mi>U</mi> <mi>d</mi></msub><mo>∩</mo><mi>Δ</mi><mo>≠</mo><mi>∅</mi></mrow><annotation encoding="application/x-tex">U_d \cap \Delta \neq \emptyset</annotation></semantics></math> implies that <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><msub><mi>U</mi> <mi>d</mi></msub></mrow><annotation encoding="application/x-tex">U_d</annotation></semantics></math> is nonempty. Meanwhile, the other rule checks that the same computed usage <em>is</em> empty.</p>

<p>In both rules, <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><msub><mi>Γ</mi> <mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\Gamma_2</annotation></semantics></math> is split to find the scope to which the projections are added. If the application uses resources, that scope is the innermost scope with resources that were used. Otherwise it’s the outermost scope.</p>

<p>The projections cannot go in a scope outside one with resources used, because then there would be no way to get the variables out there in ordinary MILL using a match.</p>

<p>On the other hand, it can be trouble to put the projections in a scope more inside than necessary, since the lambda rule checks that everything in its scope was consumed. The projections only need to be consumed before one of their dependencies goes out of scope. For example, (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>λ</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>λ</mi><mi>y</mi><mo>:</mo><mi>B</mi><mo>.</mo><mo stretchy="false">(</mo><mi>y</mi><mo>,</mo><msub><mi>f</mi> <mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>,</mo><msub><mi>f</mi> <mrow><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\lambda x:A.((\lambda y:B.(y,f_{(1)}(x))),f_{(2)}(x))</annotation></semantics></math>) means (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>λ</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>let</mi><mspace width="thickmathspace"></mspace><mo stretchy="false">(</mo><msub><mi>f</mi> <mn>1</mn></msub><mo>,</mo><msub><mi>f</mi> <mn>2</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mspace width="thickmathspace"></mspace><mi>in</mi><mspace width="thickmathspace"></mspace><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>λ</mi><mi>y</mi><mo>:</mo><mi>B</mi><mo>.</mo><mo stretchy="false">(</mo><mi>y</mi><mo>,</mo><msub><mi>f</mi> <mn>1</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>,</mo><msub><mi>f</mi> <mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\lambda x:A.let\;(f_1,f_2) = f(x)\;in\;((\lambda y:B.(y,f_1)),f_2)</annotation></semantics></math>), but would be rejected if we naively put <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math> into the scope in which it’s first encountered.</p>

<h2 id="references">References</h2>

<p>These algorithmic rules are loosely based on:</p>

<ul>
<li id="Allais">Guillaume Allais, <em>Typing with Leftovers – A mechanization of Intuitionistic Multiplicative-Additive Linear Logic</em>, TYPES 2017 (<a href="http://drops.dagstuhl.de/opus/volltexte/2018/10049/pdf/LIPIcs-TYPES-2017-1.pdf">pdf</a>)</li>
</ul>

<p>The idea to allow tensor projections in some sound way, and a lot of the notation, are from:</p>

<ul>
<li id="Shulman"><a class="existingWikiWord" href="/nlab/show/Michael+Shulman">Michael Shulman</a>, <em>A practical type theory for symmetric monoidal categories</em>, 2019 (<a href="https://arxiv.org/abs/1911.00818">arXiv</a>)</li>
</ul>
</body></html>

</div>

<div class="revisedby">
    <p>
    Last revised on December 17, 2019 at 01:46:21.
    See the <a href="/nlab/history/tensor+projection" style="color: #005c19">history</a> of this page for a list of all contributions to it.
    </p>
</div>

<div class="navigation navfoot">

  <a href="/nlab/edit/tensor+projection" accesskey="E" class="navlink" id="edit" rel="nofollow">Edit</a><a href="https://nforum.ncatlab.org/discussion/10661/#Item_60">Discuss</a><span class="backintime"><a href="/nlab/revision/tensor+projection/13" accesskey="B" class="navlinkbackintime" id="to_previous_revision" rel="nofollow">Previous revision</a></span><a href="/nlab/show/diff/tensor+projection" accesskey="C" class="navlink" id="see_changes" rel="nofollow">Changes from previous revision</a><a href="/nlab/history/tensor+projection" accesskey="S" class="navlink" id="history" rel="nofollow">History (13 revisions)</a>
  <a href="/nlab/show/tensor+projection/cite" style="color: black">Cite</a>
  <a href="/nlab/print/tensor+projection" accesskey="p" id="view_print" rel="nofollow">Print</a>
    <a href="/nlab/source/tensor+projection" id="view_source" rel="nofollow">Source</a>

  


</div>


</div> <!-- Content -->

</div> <!-- Container -->

</body>
</html>
