
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1//EN" "http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg-flat.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>
      CompLF/HOAS in nLab
  </title>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="/stylesheets/instiki.css?1553353531" media="all" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/mathematics.css?1534319116" media="all" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/syntax.css?1531905161" media="all" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/nlab.css?1592003439" media="all" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/dreampulse/computer-modern-web-font/master/fonts.css"/>

  <style type="text/css">
    h1#pageName, div.info, .newWikiWord a, a.existingWikiWord, .newWikiWord a:hover, [actiontype="toggle"]:hover, #TextileHelp h3 {
      color: #226622;
    }
    a:visited.existingWikiWord {
      color: #164416;
    }
    
    
  </style>
  
  <style type="text/css"><!--/*--><![CDATA[/*><!--*/
    .toc ul {margin: 0; padding: 0;}
.toc ul ul {margin: 0; padding: 0 0 0 10px;}
.toc li > p {margin: 0}
.toc ul li {list-style-type: none; position: relative;}
.toc div {border-top:1px dotted #ccc;}
.rightHandSide h2 {font-size: 1.5em;color:#008B26}
table.plaintable {
    border-collapse:collapse;
    margin-left:30px;
    border:0;
}
.plaintable td {border:1px solid #000; padding: 3px;}
.plaintable th {padding: 3px;}
.plaintable caption {
    font-weight: bold;
    font-size:1.1em;
    text-align:center;
    margin-left:30px;
}
    
   
/* Query boxes for questioning and answering mechanism */
div.query{
background: #f6fff3;
border: solid #ce9;
border-width: 2px 1px;
padding: 0 1em;
margin: 0 1em;
max-height: 20em;
overflow: auto;
}

/* Standout boxes for putting important text */
div.standout{
background: #fff1f1;
border: solid black;
border-width: 2px 1px;
padding: 0 1em;
margin: 0 1em;
overflow: auto;
}

/* Icon for links to n-category arXiv documents 
 (commented out for now i.e. disabled)
a[href*="http://arxiv.org/"] {
  background-image: url(../files/arXiv_icon.gif);
  background-repeat: no-repeat;
  background-position: right bottom;
     padding-right: 22px;
  } */
    
/* Icon for links to n-category cafe posts (disabled) 
a[href*="http://golem.ph.utexas.edu/category"] {
  background-image: url(../files/n-cafe_5.gif);
  background-repeat: no-repeat;
  background-position: right bottom;
     padding-right: 25px;
  } */

/* Icon for links to pdf files (disabled)
a[href$=".pdf"] {
  background-image: url(../files/pdficon_small.gif);
  background-repeat: no-repeat;
  background-position: right bottom;
     padding-right: 25px;
  } */

/* Icon for links to pages, etc. -inside- pdf files (disabled)
a[href*=".pdf#"] {
  background-image: url(../files/pdf_entry.gif);
  background-repeat: no-repeat;
  background-position: right bottom;
     padding-right: 25px;
  } */

a.existingWikiWord {
color: #226622;
}

a.existingWikiWord:visited {
color: #226622;
}


a.existingWikiWord[title] {
border: 0px;
color: #aa0505;
text-decoration: none;
}
    
a.existingWikiWord[title]:visited {
border: 0px;
color: #551111;
text-decoration: none;
}

a[href^="http://"] {
border: 0px;
color: #003399;
}

a[href^="http://"]:visited {
border: 0px;
color: #330066;
}

a[href^="https://"] {
border: 0px;
color: #003399;
}

a[href^="https://"]:visited {
border: 0px;
color: #330066;
}

div.dropDown .hide {
display: none;
}

div.dropDown:hover .hide {
display:block;
}

div.clickDown .hide {
display: none;
}

div.clickDown:focus {
outline:none;
}

div.clickDown:focus .hide, div.clickDown:hover .hide {
display: block;
}

div.clickDown .clickToReveal, div.clickDown:focus .clickToHide {
display:block;
}

div.clickDown:focus .clickToReveal, div.clickDown .clickToHide {
display:none;
}

div.clickDown .clickToReveal:after {
content: "\A(Hover to reveal, click to \"hold\")";
font-size: 60%;
}

div.clickDown .clickToHide:after {
content: "\A(Click to hide)";
font-size: 60%;
}
div.clickDown .clickToHide, div.clickDown .clickToReveal {
white-space: pre-wrap;
}

.un_theorem, .num_theorem, .un_lemma, .num_lemma, .un_prop, .num_prop, .un_cor, .num_cor, .un_defn, .num_defn, .un_example, .num_example, .un_note, .num_note, .un_remark, .num_remark {
margin-left: 1em;
}

span.theorem_label {
margin-left: -1em;
}
.proof span.theorem_label {
margin-left: 0em;
}
:target {
    background-color: #BBBBBB;
    border-radius: 5pt;
    padding: 0 10pt;
}
    
    
    
    
    
    
    
    
    
    
    
    
  /*]]>*/--></style>
  <script src="/javascripts/prototype.js?1532905251" type="text/javascript"></script>
<script src="/javascripts/effects.js?1532905251" type="text/javascript"></script>
<script src="/javascripts/dragdrop.js?1532905252" type="text/javascript"></script>
<script src="/javascripts/controls.js?1532905250" type="text/javascript"></script>
<script src="/javascripts/application.js?1532905250" type="text/javascript"></script>
  <script src="/javascripts/page_helper.js?1533109147" type="text/javascript"></script>
  <script src="/javascripts/thm_numbering.js?1533108238" type="text/javascript"></script>
  
  <script type="text/x-mathjax-config">
  <!--//--><![CDATA[//><!--
    MathJax.Ajax.config.path["Contrib"] = "/MathJax";
    MathJax.Hub.Config({
      MathML: { useMathMLspacing: true },
      "HTML-CSS": { scale: 90,
                    extensions: ["handle-floats.js"]
      }
    });
    MathJax.Hub.Queue( function () {
       var fos = document.getElementsByTagName('foreignObject');
       for (var i = 0; i < fos.length; i++) {
         MathJax.Hub.Typeset(fos[i]);
       }
    });
  //--><!]]>
  </script>

  <script type="text/javascript">
    <!--//--><![CDATA[//><!--
    window.addEventListener("DOMContentLoaded", function () {
      var div = document.createElement('div');
      var math = document.createElementNS('http://www.w3.org/1998/Math/MathML', 'math');
      document.body.appendChild(div);
      div.appendChild(math);
    // Test for MathML support comparable to WebKit version https://trac.webkit.org/changeset/203640 or higher.
      div.setAttribute('style', 'font-style: italic');
      var mathml_unsupported = !(window.getComputedStyle(div.firstChild).getPropertyValue('font-style') === 'normal');
      div.parentNode.removeChild(div);
      if (mathml_unsupported) {
        // MathML does not seem to be supported...
        var s = document.createElement('script');
        s.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=MML_HTMLorMML-full";
        document.querySelector('head').appendChild(s);
      } else {
        document.head.insertAdjacentHTML("beforeend", '<style>svg[viewBox] {max-width: 100%}</style>');
      }
    });
    //--><!]]>
  </script>

  	<link href="https://ncatlab.org/nlab/atom_with_headlines" rel="alternate" title="Atom with headlines" type="application/atom+xml" />
  	<link href="https://ncatlab.org/nlab/atom_with_content" rel="alternate" title="Atom with full content" type="application/atom+xml" />
  <script type="text/javascript">
  document.observe("dom:loaded", function() {
    generateThmNumbers();
  });
  </script>
</head>

<body>

<div id="Container">
<div id="Content">
  <h1 id="pageName">
    <span style="float: left; margin: 0.5em 0.25em -0.25em 0">
      <svg xmlns="http://www.w3.org/2000/svg" width="1.872em" height="1.8em" viewBox="0 0 190 181">
        <path fill="#226622" d="M72.8 145c-1.6 17.3-15.7 10-23.6 20.2-5.6 7.3 4.8 15 11.4 15 11.5-.2 19-13.4 26.4-20.3 3.3-3 8.2-4 11.2-7.2a14 14 0 0 0 2.9-11.1c-1.4-9.6-12.4-18.6-16.9-27.2-5-9.6-10.7-27.4-24.1-27.7-17.4-.3-.4 26 4.7 30.7 2.4 2.3 5.4 4.1 7.3 6.9 1.6 2.3 2.1 5.8-1 7.2-5.9 2.6-12.4-6.3-15.5-10-8.8-10.6-15.5-23-26.2-31.8-5.2-4.3-11.8-8-18-3.7-7.3 4.9-4.2 12.9.2 18.5a81 81 0 0 0 30.7 23c3.3 1.5 12.8 5.6 10 10.7-2.5 5.2-11.7 3-15.6 1.1-8.4-3.8-24.3-21.3-34.4-13.7-3.5 2.6-2.3 7.6-1.2 11.1 2.8 9 12.2 17.2 20.9 20.5 17.3 6.7 34.3-8 50.8-12.1z"/>
        <path fill="#a41e32" d="M145.9 121.3c-.2-7.5 0-19.6-4.5-26-5.4-7.5-12.9-1-14.1 5.8-1.4 7.8 2.7 14.1 4.8 21.3 3.4 12 5.8 29-.8 40.1-3.6-6.7-5.2-13-7-20.4-2.1-8.2-12.8-13.2-15.1-1.9-2 9.7 9 21.2 12 30.1 1.2 4 2 8.8 6.4 10.3 6.9 2.3 13.3-4.7 17.7-8.8 12.2-11.5 36.6-20.7 43.4-36.4 6.7-15.7-13.7-14-21.3-7.2-9.1 8-11.9 20.5-23.6 25.1 7.5-23.7 31.8-37.6 38.4-61.4 2-7.3-.8-29.6-13-19.8-14.5 11.6-6.6 37.6-23.3 49.2z"/>
        <path fill="#193c78" d="M86.3 47.5c0-13-10.2-27.6-5.8-40.4 2.8-8.4 14.1-10.1 17-1 3.8 11.6-.3 26.3-1.8 38 11.7-.7 10.5-16 14.8-24.3 2.1-4.2 5.7-9.1 11-6.7 6 2.7 7.4 9.2 6.6 15.1-2.2 14-12.2 18.8-22.4 27-3.4 2.7-8 6.6-5.9 11.6 2 4.4 7 4.5 10.7 2.8 7.4-3.3 13.4-16.5 21.7-16 14.6.7 12 21.9.9 26.2-5 1.9-10.2 2.3-15.2 3.9-5.8 1.8-9.4 8.7-15.7 8.9-6.1.1-9-6.9-14.3-9-14.4-6-33.3-2-44.7-14.7-3.7-4.2-9.6-12-4.9-17.4 9.3-10.7 28 7.2 35.7 12 2 1.1 11 6.9 11.4 1.1.4-5.2-10-8.2-13.5-10-11.1-5.2-30-15.3-35-27.3-2.5-6 2.8-13.8 9.4-13.6 6.9.2 13.4 7 17.5 12C70.9 34 75 43.8 86.3 47.4z"/>
      </svg>
    </span>
      <span class="webName">nLab</span><br />
      CompLF/HOAS
  </h1>



<div class="navigation">
    <span class="skipNav"><a href='#navEnd'>Skip the Navigation Links</a> | </span>
    <span style="display:inline-block; width: 0.3em;"></span>
    <a href="/nlab/show/HomePage" accesskey="H" title="Home page">Home Page</a> |
    <a href="/nlab/all_pages" accesskey="A" title="List of all pages">All Pages</a> |
    <a href="/nlab/latest_revisions" accesskey="U" title="Latest edits and page creations">Latest Revisions</a> |
    <a href="https://nforum.ncatlab.org/discussion/11554/#Item_1" title="Discuss this page in its dedicated thread on the nForum" style="color: black">Discuss this page</a> |
    <a href="/nlab/feeds" title="Subscribe to changes by Atom">Feeds</a> |
<form accept-charset="utf-8" action="/nlab/search" id="navigationSearchForm" method="get">      <fieldset class="search"><input type="text" id="searchField" name="query" value="Search"
             style="display:inline-block; float: left;"
             onfocus="this.value == 'Search' ? this.value = '' : true"
             onblur="this.value == '' ? this.value = 'Search' : true" /></fieldset>
</form>  <span id='navEnd'></span>
</div>






<div id="revision">
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:svg="http://www.w3.org/2000/svg" xml:lang="en" lang="en">
<head><meta http-equiv="Content-type" content="application/xhtml+xml;charset=utf-8" /><title>Contents</title></head>
<body>
<h1 id="contents">Contents</h1>
<div class='maruku_toc'>
<ul>
<li><a href='#idea'>Idea</a></li>
<li><a href='#secondorder_formulation_of_rules'>Second-order formulation of rules</a></li>
<ul>
<li><a href='#miscellaneous'>Miscellaneous</a></li>
<li><a href='#equality'>Equality</a></li>
<li><a href='#identity'>Identity</a></li>
<li><a href='#functions'>Functions</a></li>
<li><a href='#intersection'>Intersection</a></li>
<li><a href='#subset'>Subset</a></li>
<li><a href='#computations'>Computations</a></li>
<li><a href='#booleans'>Booleans</a></li>
<li><a href='#per'>PER</a></li>
</ul>
<li><a href='#judgmentlevel_reasoning'>Judgment-level reasoning</a></li>
<ul>
<li><a href='#vs_reasoning_about_reflected_judgments'>Vs reasoning about Reflected Judgments</a></li>
<ul>
<li><a href='#open_vs_closed_terms'>Open vs “Closed Terms”</a></li>
<li><a href='#presuppositions'>Presuppositions</a></li>
<li><a href='#strong_vs_weak_negation'>Strong vs Weak Negation</a></li>
</ul>
</ul>
</ul>
</div>

<h2 id="idea">Idea</h2>

<p>The <a class="existingWikiWord" href="/nlab/show/CompLF+v1">rules of CompLF</a> have been designed so that <a class="existingWikiWord" href="/nlab/show/structural+rules">structural rules</a> (e.g. weakening and substitution) are admissible, and the remaining rules can be expressed as higher-order abstract syntax (HOAS) axioms in <a class="existingWikiWord" href="/nlab/show/logical+frameworks">logical frameworks</a> like <a class="existingWikiWord" href="/nlab/show/LF">LF</a> or <a class="existingWikiWord" href="/nlab/show/Isabelle">Isabelle</a>/Pure. (Except the variable rule, which isn’t needed in HOAS form.) This is a significant (but superficial) difference from Nuprl. Two major interesting things happen with this HOAS formulation of CompLF.</p>

<p>First, the HOAS formulation highlights a connection between dependent type systems and partial logic. The connection is there for all dependent type systems formulated as deductive systems with judgments on raw terms (untyped <span class="newWikiWord">abstract syntax<a href="/nlab/new/abstract+syntax">?</a></span> trees), but Nuprl-like systems make more use of the connection than most.</p>

<p>Second, although the rules are not algorithmic, there is implicit propagation of type validity facts in the semantics, which is analogous to the type propagation of a dependent type checker. The primitive typing judgment form (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>a</mi><mo>⊩</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">a \Vdash A</annotation></semantics></math>) outputs validity of the type (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>A</mi><mspace width="thinmathspace"></mspace><mi>type</mi></mrow><annotation encoding="application/x-tex">A\,type</annotation></semantics></math>). But using the inversion rules, it’s possible to derive rules for a defined typing judgment form that inputs type validity. This will hopefully be useful for verifying a bidirectional proof checker for CompLF and similar systems.</p>

<h2 id="secondorder_formulation_of_rules">Second-order formulation of rules</h2>

<p>This section repeats some of the rules of v1 in HOAS style, since variables and substitution (of terms) are technically expressed differently. For convenience, here is the <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Nat</mi></mrow><annotation encoding="application/x-tex">Nat</annotation></semantics></math> elimination rule from <a class="existingWikiWord" href="/nlab/show/CompLF+v1">v1</a>:</p>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mfrac><mtable displaystyle="false" rowspacing="0.5ex" columnalign="left"><mtr><mtd><mi>Γ</mi><mo>⊢</mo><mi>n</mi><mo>⊩</mo><mi>Nat</mi><mspace width="2em"></mspace><mi>Γ</mi><mo>,</mo><mi>x</mi><mo>:</mo><mi>Nat</mi><mo>⊢</mo><mi>C</mi><mspace width="thinmathspace"></mspace><mi>type</mi></mtd></mtr> <mtr><mtd><mi>Γ</mi><mo>⊢</mo><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>zro</mi><mo stretchy="false">/</mo><mi>x</mi><mo stretchy="false">]</mo></mtd></mtr> <mtr><mtd><mi>Γ</mi><mo>,</mo><mi>x</mi><mo>:</mo><mi>Nat</mi><mo>,</mo><mi>h</mi><mo>:</mo><mi>C</mi><mo>⊢</mo><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>suc</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">/</mo><mi>x</mi><mo stretchy="false">]</mo></mtd></mtr></mtable><mrow><mi>Γ</mi><mo>⊢</mo><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">/</mo><mi>x</mi><mo stretchy="false">]</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\begin{array}{l}
\Gamma \vdash n \Vdash Nat \qquad
\Gamma,x:Nat \vdash C\,type \\
\Gamma \vdash c \Vdash C[zro/x] \\
\Gamma,x:Nat,h:C \vdash c \Vdash C[suc(x)/x]
\end{array}}
{\Gamma \vdash c \Vdash C[n/x]}
</annotation></semantics></math></div>
<p>And here it is in a traditional HOAS form:</p>

<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>natElim</mi><mspace width="thinmathspace"></mspace><mo>:</mo><mspace width="thinmathspace"></mspace><mo>∀</mo><mi>n</mi><mo>,</mo><mi>c</mi><mo>,</mo><mi>C</mi><mo>.</mo><mo stretchy="false">(</mo><mi>n</mi><mo>⊩</mo><mi>Nat</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mo>∀</mo><mi>x</mi><mo>.</mo><mo stretchy="false">(</mo><mi>x</mi><mo>⊩</mo><mi>Nat</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>C</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mi>type</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>⇒</mo></mrow><annotation encoding="application/x-tex">natElim\,:\,\forall n,c,C.(n \Vdash Nat) \Rightarrow
(\forall x.(x \Vdash Nat) \Rightarrow (C(x)\,type)) \Rightarrow</annotation></semantics></math><br /><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mspace width="2em"></mspace><mo stretchy="false">(</mo><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">(</mo><mi>zro</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mo>∀</mo><mi>x</mi><mo>,</mo><mi>h</mi><mo>.</mo><mo stretchy="false">(</mo><mi>x</mi><mo>⊩</mo><mi>Nat</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>h</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">(</mo><mi>suc</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>⇒</mo></mrow><annotation encoding="application/x-tex">\qquad (c \Vdash C(zro)) \Rightarrow
(\forall x,h.(x \Vdash Nat) \Rightarrow (h \Vdash C(x)) \Rightarrow (c \Vdash C(suc(x)))) \Rightarrow</annotation></semantics></math><br /><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mspace width="2em"></mspace><mo stretchy="false">(</mo><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\qquad (c \Vdash C(n))</annotation></semantics></math></p>

<p>So in the HOAS formulation of rules, the judgment forms are atomic relation symbols in a predicate logic, and the rules are axioms. Note that <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math> in this example rule is a <em>function</em> in the HOAS formulation. But it’s a function of the metalanguage, not of the object language. When rules quantify over functions, that’s second-order quantification.</p>

<p>Translating ordinary rules into HOAS lands in a second-order fragment. There’s a somewhat standard notation for rules of this fragment, which leaves the quantifiers implicit, and more resembles ordinary rules. (Meta)variables “declared” to the left of a turnstile in a “premise” are quantified just in that premise; the rest are quantified at the outside of the rule. Note that all the premise-local quantifiers only quantify over terms, which is first-order. Here is <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>natElim</mi></mrow><annotation encoding="application/x-tex">natElim</annotation></semantics></math> in this “second-order” notation:</p>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mfrac><mtable displaystyle="false" rowspacing="0.5ex" columnalign="left"><mtr><mtd><mi>n</mi><mo>⊩</mo><mi>Nat</mi><mspace width="2em"></mspace><mi>x</mi><mo>:</mo><mi>Nat</mi><mo>⊢</mo><mi>C</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mtd></mtr> <mtr><mtd><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>zro</mi><mo stretchy="false">]</mo></mtd></mtr> <mtr><mtd><mi>x</mi><mo>:</mo><mi>Nat</mi><mo>,</mo><mi>h</mi><mo>:</mo><mi>C</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo>⊢</mo><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>suc</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mtd></mtr></mtable><mrow><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\begin{array}{l}
n \Vdash Nat \qquad
x:Nat \vdash C[x]\,type \\
c \Vdash C[zro] \\
x:Nat,h:C[x] \vdash c \Vdash C[suc(x)]
\end{array}}
{c \Vdash C[n]}
</annotation></semantics></math></div>
<p>Much nicer, right? Note that the variable declarations effect both a quantifier and a typing hypothesis. So the special status of typing judgments working like context entries is built into the notation.</p>

<p>The rest of the rules we repeat in HOAS form will be given now in this second-order notation. Many rules will not be repeated because there’s no guesswork in translating them.</p>

<h3 id="miscellaneous">Miscellaneous</h3>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mfrac><mrow><mi>a</mi><mo>⊩</mo><mi>A</mi></mrow><mrow><mi>A</mi><mspace width="thinmathspace"></mspace><mi>type</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{a \Vdash A}{A\,type}</annotation></semantics></math></div>
<h3 id="equality">Equality</h3>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mrow><mtable displaystyle="true" rowspacing="1.0ex"><mtr><mtd><mfrac><mrow><mi>a</mi><mo>⊩</mo><mi>A</mi></mrow><mrow><mi>q</mi><mo>⊩</mo><mi>p</mi><mn>1</mn><mo>=</mo><mi>p</mi><mn>2</mn><mo>∈</mo><mo stretchy="false">(</mo><mi>a</mi><mo>=</mo><mi>a</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mrow><mi>p</mi><mo>⊩</mo><mi>a</mi><mo>=</mo><mi>a</mi><mo>′</mo><mo>∈</mo><mi>A</mi></mrow><mrow><mi>a</mi><mo>⊩</mo><mi>A</mi></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mrow><mi>p</mi><mo>⊩</mo><mi>a</mi><mo>=</mo><mi>a</mi><mo>′</mo><mo>∈</mo><mi>A</mi><mspace width="2em"></mspace><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>C</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mspace width="thinmathspace"></mspace><mi>type</mi><mspace width="2em"></mspace><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo></mrow><mrow><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>a</mi><mo>′</mo><mo stretchy="false">]</mo></mrow></mfrac></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\begin{gathered}
\frac{a \Vdash A}{q \Vdash p1 = p2 \in (a = a \in A)} \\
\\
\frac{p \Vdash a = a' \in A}{a \Vdash A} \\
\\
\frac{p \Vdash a = a' \in A \qquad
x:A \vdash C[x]\,type \qquad
c \Vdash C[a]}
{c \Vdash C[a']}
\end{gathered}
</annotation></semantics></math></div>
<h3 id="identity">Identity</h3>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mfrac><mrow><mi>p</mi><mo>⊩</mo><mi>t</mi><mo>≡</mo><mi>t</mi><mo>′</mo><mspace width="2em"></mspace><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>t</mi><mo stretchy="false">]</mo></mrow><mrow><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>t</mi><mo>′</mo><mo stretchy="false">]</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{p \Vdash t \equiv t' \qquad c \Vdash C[t]}{c \Vdash C[t']}</annotation></semantics></math></div>
<h3 id="functions">Functions</h3>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mrow><mtable displaystyle="true" rowspacing="1.0ex"><mtr><mtd><mfrac><mrow><mi>A</mi><mspace width="thinmathspace"></mspace><mi>type</mi><mspace width="2em"></mspace><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mrow><mrow><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mrow><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mrow><mrow><mi>A</mi><mspace width="thinmathspace"></mspace><mi>type</mi></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mrow><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mspace width="thinmathspace"></mspace><mi>type</mi><mspace width="2em"></mspace><mi>a</mi><mo>⊩</mo><mi>A</mi></mrow><mrow><mi>B</mi><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mrow><mi>f</mi><mo>⊩</mo><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mspace width="2em"></mspace><mi>a</mi><mo>⊩</mo><mi>A</mi></mrow><mrow><mi>f</mi><mspace width="thinmathspace"></mspace><mi>a</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mrow><mi>A</mi><mspace width="thinmathspace"></mspace><mi>type</mi><mspace width="2em"></mspace><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>p</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo>⊩</mo><mi>f</mi><mspace width="thinmathspace"></mspace><mi>x</mi><mo>=</mo><mi>f</mi><mo>′</mo><mspace width="thinmathspace"></mspace><mi>x</mi><mo>∈</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><mrow><mi>q</mi><mo>⊩</mo><mi>f</mi><mo>=</mo><mi>f</mi><mo>′</mo><mo>∈</mo><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow></mfrac></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\begin{gathered}
\frac{A\,type \qquad x:A \vdash B[x]\,type}{\Pi x:A.B[x]\,type} \\
\\
\frac{\Pi x:A.B[x]\,type}{A\,type} \\
\\
\frac{\Pi x:A.B[x]\,type \qquad a \Vdash A}{B[a]\,type} \\
\\
\\
\frac{f \Vdash \Pi x:A.B[x] \qquad a \Vdash A}{f\,a \Vdash B[a]} \\
\\
\frac{A\,type \qquad
x:A \vdash p[x] \Vdash f\,x = f'\,x \in B[x]}
{q \Vdash f = f' \in \Pi x:A.B[x]}
\end{gathered}
</annotation></semantics></math></div>
<h3 id="intersection">Intersection</h3>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mrow><mtable displaystyle="true" rowspacing="1.0ex"><mtr><mtd><mfrac><mrow><mi>b</mi><mo>⊩</mo><mo>∩</mo><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mspace width="2em"></mspace><mi>a</mi><mo>⊩</mo><mi>A</mi></mrow><mrow><mi>b</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mrow><mi>A</mi><mspace width="thinmathspace"></mspace><mi>type</mi><mspace width="2em"></mspace><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>p</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo>⊩</mo><mi>b</mi><mo>=</mo><mi>b</mi><mo>′</mo><mo>∈</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><mrow><mi>q</mi><mo>⊩</mo><mi>b</mi><mo>=</mo><mi>b</mi><mo>′</mo><mo>∈</mo><mo>∩</mo><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow></mfrac></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\begin{gathered}
\frac{b \Vdash \cap x:A.B[x] \qquad a \Vdash A}{b \Vdash B[a]} \\
\\
\frac{A\,type \qquad
x:A \vdash p[x] \Vdash b = b' \in B[x]}
{q \Vdash b = b' \in \cap x:A.B[x]}
\end{gathered}
</annotation></semantics></math></div>
<h3 id="subset">Subset</h3>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mrow><mtable displaystyle="true" rowspacing="1.0ex"><mtr><mtd><mfrac><mrow><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mspace width="thinmathspace"></mspace><mi>type</mi><mspace width="2em"></mspace><mi>a</mi><mo>⊩</mo><mi>A</mi><mspace width="2em"></mspace><mi>b</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo></mrow><mrow><mi>a</mi><mo>⊩</mo><mo stretchy="false">{</mo><mi>x</mi><mo>:</mo><mi>A</mi><mo stretchy="false">|</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo stretchy="false">}</mo></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mrow><mi>a</mi><mo>⊩</mo><mo stretchy="false">{</mo><mi>x</mi><mo>:</mo><mi>A</mi><mo stretchy="false">|</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo stretchy="false">}</mo><mspace width="2em"></mspace><mi>x</mi><mo>:</mo><mi>A</mi><mo>,</mo><mi>y</mi><mo>:</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo>⊢</mo><mi>c</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><mrow><mi>c</mi><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo></mrow></mfrac></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\begin{gathered}
\frac{x:A \vdash B[x]\,type \qquad
a \Vdash A \qquad b \Vdash B[a]}
{a \Vdash \{x:A | B[x]\}} \\
\\
\frac{a \Vdash \{x:A | B[x]\} \qquad
x:A,y:B[x] \vdash c[x] \Vdash C[x]}
{c[a] \Vdash C[a]}
\end{gathered}
</annotation></semantics></math></div>
<h3 id="computations">Computations</h3>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mrow><mtable displaystyle="true" rowspacing="1.0ex"><mtr><mtd><mfrac><mrow><mi>x</mi><mo>:</mo><mi>Comp</mi><mo>⊢</mo><mi>b</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo>⊩</mo><mi>Comp</mi></mrow><mrow><mi>λ</mi><mi>x</mi><mo>.</mo><mi>b</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo>⊩</mo><mi>Comp</mi></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mtable displaystyle="false" rowspacing="0.5ex" columnalign="left"><mtr><mtd><mi>a</mi><mo>⊩</mo><mi>A</mi><mspace width="2em"></mspace><mi>y</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>C</mi><mo stretchy="false">[</mo><mi>y</mi><mo stretchy="false">]</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mtd></mtr> <mtr><mtd><mi>x</mi><mo>:</mo><mi>Comp</mi><mo>,</mo><mi>x</mi><mo>′</mo><mo>:</mo><mi>Comp</mi><mo>,</mo><mi>h</mi><mo>:</mo><mo stretchy="false">(</mo><mi>x</mi><mo>=</mo><mi>x</mi><mo>′</mo><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo><mo>⊢</mo><mi>p</mi><mo stretchy="false">[</mo><mi>x</mi><mo>,</mo><mi>x</mi><mo>′</mo><mo>,</mo><mi>h</mi><mo stretchy="false">]</mo><mo>⊩</mo><mi>c</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo>=</mo><mi>c</mi><mo>′</mo><mo stretchy="false">[</mo><mi>x</mi><mo>′</mo><mo stretchy="false">]</mo><mo>∈</mo><mi>C</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mtd></mtr></mtable><mrow><mi>q</mi><mo>⊩</mo><mi>c</mi><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo><mo>=</mo><mi>c</mi><mo>′</mo><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo><mo>∈</mo><mi>C</mi><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo></mrow></mfrac></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\begin{gathered}
\frac{x:Comp \vdash b[x] \Vdash Comp}{\lambda x.b[x] \Vdash Comp} \\
\\
\frac{\begin{array}{l}
a \Vdash A \qquad
y:A \vdash C[y]\,type \\
x:Comp,x':Comp,h:(x = x' \in A) \vdash
p[x,x',h] \Vdash c[x] = c'[x'] \in C[x]
\end{array}}
{q \Vdash c[a] = c'[a] \in C[a]}
\end{gathered}
</annotation></semantics></math></div>
<h3 id="booleans">Booleans</h3>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mfrac><mrow><mi>b</mi><mo>⊩</mo><mi>Bool</mi><mspace width="2em"></mspace><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>tru</mi><mo stretchy="false">]</mo><mspace width="2em"></mspace><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>fls</mi><mo stretchy="false">]</mo></mrow><mrow><mi>c</mi><mo>⊩</mo><mi>C</mi><mo stretchy="false">[</mo><mi>b</mi><mo stretchy="false">]</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{b \Vdash Bool \qquad
c \Vdash C[tru] \qquad
c \Vdash C[fls]}
{c \Vdash C[b]}
</annotation></semantics></math></div>
<h3 id="per">PER</h3>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mrow><mtable displaystyle="true" rowspacing="1.0ex"><mtr><mtd><mfrac><mtable displaystyle="false" rowspacing="0.5ex" columnalign="left"><mtr><mtd><mi>x</mi><mn>1</mn><mo>:</mo><mi>Comp</mi><mo>,</mo><mi>x</mi><mn>2</mn><mo>:</mo><mi>Comp</mi><mo>⊢</mo><mi>R</mi><mo stretchy="false">[</mo><mi>x</mi><mn>1</mn><mo>,</mo><mi>x</mi><mn>2</mn><mo stretchy="false">]</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mtd></mtr> <mtr><mtd><mi>y</mi><mn>1</mn><mo>:</mo><mi>Comp</mi><mo>,</mo><mi>y</mi><mn>2</mn><mo>:</mo><mi>Comp</mi><mo>⊢</mo><mi>s</mi><mo stretchy="false">[</mo><mi>y</mi><mn>1</mn><mo>,</mo><mi>y</mi><mn>2</mn><mo stretchy="false">]</mo><mo>⊩</mo><mi>R</mi><mo stretchy="false">[</mo><mi>y</mi><mn>1</mn><mo>,</mo><mi>y</mi><mn>2</mn><mo stretchy="false">]</mo><mo>⊃</mo><mi>R</mi><mo stretchy="false">[</mo><mi>y</mi><mn>2</mn><mo>,</mo><mi>y</mi><mn>1</mn><mo stretchy="false">]</mo></mtd></mtr> <mtr><mtd><mi>y</mi><mn>1</mn><mo>:</mo><mi>Comp</mi><mo>,</mo><mi>y</mi><mn>2</mn><mo>:</mo><mi>Comp</mi><mo>,</mo><mi>y</mi><mn>3</mn><mo>:</mo><mi>Comp</mi><mo>⊢</mo><mi>t</mi><mo stretchy="false">[</mo><mi>y</mi><mn>1</mn><mo>,</mo><mi>y</mi><mn>2</mn><mo>,</mo><mi>y</mi><mn>3</mn><mo stretchy="false">]</mo><mo>⊩</mo><mi>R</mi><mo stretchy="false">[</mo><mi>y</mi><mn>1</mn><mo>,</mo><mi>y</mi><mn>2</mn><mo stretchy="false">]</mo><mo>⊃</mo><mi>R</mi><mo stretchy="false">[</mo><mi>y</mi><mn>2</mn><mo>,</mo><mi>y</mi><mn>3</mn><mo stretchy="false">]</mo><mo>⊃</mo><mi>R</mi><mo stretchy="false">[</mo><mi>y</mi><mn>1</mn><mo>,</mo><mi>y</mi><mn>3</mn><mo stretchy="false">]</mo></mtd></mtr></mtable><mrow><mo stretchy="false">{</mo><mi>x</mi><mn>1</mn><mo>=</mo><mi>x</mi><mn>2</mn><mo stretchy="false">|</mo><mi>R</mi><mo stretchy="false">[</mo><mi>x</mi><mn>1</mn><mo>,</mo><mi>x</mi><mn>2</mn><mo stretchy="false">]</mo><mo stretchy="false">}</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mrow></mfrac></mtd></mtr> <mtr><mtd></mtd></mtr> <mtr><mtd><mfrac><mtable displaystyle="false" rowspacing="0.5ex" columnalign="left"><mtr><mtd><mi>p</mi><mo>⊩</mo><mi>t</mi><mn>1</mn><mo>=</mo><mi>t</mi><mn>2</mn><mo>∈</mo><mo stretchy="false">{</mo><mi>x</mi><mn>1</mn><mo>=</mo><mi>x</mi><mn>2</mn><mo stretchy="false">|</mo><mi>R</mi><mo stretchy="false">[</mo><mi>x</mi><mn>1</mn><mo>,</mo><mi>x</mi><mn>2</mn><mo stretchy="false">]</mo><mo stretchy="false">}</mo></mtd></mtr> <mtr><mtd><mi>R</mi><mo stretchy="false">[</mo><mi>t</mi><mn>1</mn><mo>,</mo><mi>t</mi><mn>2</mn><mo stretchy="false">]</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mtd></mtr> <mtr><mtd><mi>h</mi><mo>:</mo><mi>R</mi><mo stretchy="false">[</mo><mi>t</mi><mn>1</mn><mo>,</mo><mi>t</mi><mn>2</mn><mo stretchy="false">]</mo><mo>⊢</mo><mi>c</mi><mo>⊩</mo><mi>C</mi></mtd></mtr></mtable><mrow><mi>c</mi><mo>⊩</mo><mi>C</mi></mrow></mfrac></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\begin{gathered}
\frac{\begin{array}{l}
x1:Comp,x2:Comp \vdash R[x1,x2]\,type \\
y1:Comp,y2:Comp \vdash s[y1,y2] \Vdash R[y1,y2] \supset R[y2,y1] \\
y1:Comp,y2:Comp,y3:Comp \vdash t[y1,y2,y3] \Vdash R[y1,y2] \supset R[y2,y3] \supset R[y1,y3]
\end{array}}
{\{x1 = x2 | R[x1,x2]\}\,type} \\
\\
\frac{\begin{array}{l}
p \Vdash t1 = t2 \in \{x1 = x2 | R[x1,x2]\} \\
R[t1,t2]\,type \\
h:R[t1,t2] \vdash c \Vdash C
\end{array}}
{c \Vdash C}
\end{gathered}
</annotation></semantics></math></div>
<h2 id="judgmentlevel_reasoning">Judgment-level reasoning</h2>

<p>Reasoning at the judgment level using this metalanguage is not as convenient as having a type checker for terms, or even as convenient as having a Nuprl-like proof refiner that extracts the realizers. But it’s very straightforward and expressive. It can be used to prove derived rules, and other facts about derivability that aren’t of the form to be rules. For example, you can show that adding a certain new rule would allow deriving a contradiction.</p>

<p>Many unusual phenomena of Nuprl-like systems become clearer when analyzed in terms of judgment-level reasoning.</p>

<h3 id="vs_reasoning_about_reflected_judgments">Vs reasoning about Reflected Judgments</h3>

<p>In Nuprl-like systems, the semantic judgments are reflected internally as squashed types, and can be reasoned about using propositions-as-types. The metalanguage gives us a way to reason about formal judgments. Aside from the ability to reason about “large” judgment forms like type validity, is this judgment-level reasoning actually different from internal reasoning? It turns out it is.</p>

<p>For example, consider the metalanguage formula:</p>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mo>∀</mo><mi>t</mi><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>A</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\forall t.(t \Vdash A) \Rightarrow (t \Vdash B)</annotation></semantics></math></div>
<p>The puzzle is to find, assuming (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>A</mi><mspace width="thinmathspace"></mspace><mi>type</mi></mrow><annotation encoding="application/x-tex">A\,type</annotation></semantics></math>) and (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>B</mi><mspace width="thinmathspace"></mspace><mi>type</mi></mrow><annotation encoding="application/x-tex">B\,type</annotation></semantics></math>), a type that’s provably inhabited if and only if that formula is derivable. In more detail, we want some metalanguage function <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math> such that:</p>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mo>∀</mo><mi>A</mi><mo>,</mo><mi>B</mi><mo>.</mo><mo stretchy="false">(</mo><mi>A</mi><mspace width="thinmathspace"></mspace><mi>type</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>B</mi><mspace width="thinmathspace"></mspace><mi>type</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mo>∀</mo><mi>t</mi><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>A</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>⇔</mo><mo stretchy="false">(</mo><mo>∃</mo><mi>p</mi><mo>.</mo><mi>p</mi><mo>⊩</mo><mi>R</mi><mo stretchy="false">(</mo><mi>A</mi><mo>,</mo><mi>B</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\forall A,B.(A\,type) \Rightarrow (B\,type) \Rightarrow
((\forall t.(t \Vdash A) \Rightarrow (t \Vdash B)) \Leftrightarrow (\exists p.p \Vdash R(A,B)))
</annotation></semantics></math></div>
<p>A couple of perhaps-plausible-looking solutions for <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>A</mi><mo>,</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(A,B)</annotation></semantics></math> are (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Π</mi><mi>t</mi><mo>:</mo><mi>Comp</mi><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo><mo>→</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Pi t:Comp.(t \in A) \to (t \in B)</annotation></semantics></math>) and (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Π</mi><mi>t</mi><mo>:</mo><mo>⊤</mo><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo><mo>→</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Pi t:\top.(t \in A) \to (t \in B)</annotation></semantics></math>). But both of these are wrong. The first is too weak (you get left-to-right only) and the second is not even a type (which makes existence of an element too strong).</p>

<p>The metalanguage formula we’re trying to represent turns out to be asserting that <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math> is a subtype of <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math>, since it can be read as a special case of the subsumption rule:</p>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mfrac><mrow><mi>t</mi><mo>⊩</mo><mi>A</mi></mrow><mrow><mi>t</mi><mo>⊩</mo><mi>B</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{t \Vdash A}{t \Vdash B}</annotation></semantics></math></div>
<p>So we can take <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>A</mi><mo>,</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(A,B)</annotation></semantics></math> to be (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>A</mi><mo>&lt;</mo><mspace width="negativethinmathspace"></mspace><mspace width="negativethinmathspace"></mspace><mo>:</mo><mspace width="thickmathspace"></mspace><mi>B</mi></mrow><annotation encoding="application/x-tex">A \lt\!\!:\;B</annotation></semantics></math>). In fact, the first wrong answer is what we called “inclusion” (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>⊆</mo></mrow><annotation encoding="application/x-tex">\subseteq</annotation></semantics></math>).</p>

<h4 id="open_vs_closed_terms">Open vs “Closed Terms”</h4>

<p>So how come (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>∀</mo><mi>t</mi><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>A</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\forall t.(t \Vdash A) \Rightarrow (t \Vdash B)</annotation></semantics></math>) and (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Π</mi><mi>t</mi><mo>:</mo><mi>Comp</mi><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo><mo>→</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Pi t:Comp.(t \in A) \to (t \in B)</annotation></semantics></math>) don’t correspond? I mean, the intuitive reason is that subtyping is not just member inclusion, it must also preserve equations. But what is the formal reason? We have the fact that</p>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mo>∀</mo><mi>p</mi><mo>.</mo><mo stretchy="false">(</mo><mi>a</mi><mo>⊩</mo><mi>A</mi><mo stretchy="false">)</mo><mo>⇔</mo><mo stretchy="false">(</mo><mi>p</mi><mo>⊩</mo><mi>a</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\forall p.(a \Vdash A) \Leftrightarrow (p \Vdash a \in A)</annotation></semantics></math></div>
<p>so the difference between (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>⊩</mo></mrow><annotation encoding="application/x-tex">\Vdash</annotation></semantics></math>) and (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>∈</mo></mrow><annotation encoding="application/x-tex">\in</annotation></semantics></math>) is not the mismatch. The mismatch turns out to be the quantifiers used.</p>

<p>It turns out (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Π</mi><mi>t</mi><mo>:</mo><mi>Comp</mi><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo><mo>→</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Pi t:Comp.(t \in A) \to (t \in B)</annotation></semantics></math>) is inhabited if and only if (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>∀</mo><mi>t</mi><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>Comp</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>A</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\forall t.(t \Vdash Comp) \Rightarrow (t \Vdash A) \Rightarrow (t \Vdash B)</annotation></semantics></math>). So there’s an extra (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>t</mi><mo>⊩</mo><mi>Comp</mi></mrow><annotation encoding="application/x-tex">t \Vdash Comp</annotation></semantics></math>) requirement making inclusion weaker than subtyping.</p>

<p>If you think about how adequacy of a HOAS representation works, the metalanguage quantifiers over terms are quantifying over <em>open</em> terms, specifically. Meanwhile the object language quantifiers range over the elements of a type, and in the PER semantics, elements of types are represented by <em>closed</em> terms. The open terms behave differently because PER semantics also enforces respect for typed equality, and in the formal system, this requirement is implicit.</p>

<p>But equality at the <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Comp</mi></mrow><annotation encoding="application/x-tex">Comp</annotation></semantics></math> type is just computational equivalence, which is respected by all the semantic judgments. So when dealing with computations, the implicit respect requirements are vacuous, and the metalanguage reasoning about arbitrary open terms closely resembles semantic reasoning about arbitrary closed terms. This might be part of the reason why <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Comp</mi></mrow><annotation encoding="application/x-tex">Comp</annotation></semantics></math> is sometimes glossed as the type of all closed terms, although this technically doesn’t make sense. (Semantically, many types contain all the closed terms, while syntactically, no type can rule out variables.)</p>

<p>Another reason for the intuition that <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Comp</mi></mrow><annotation encoding="application/x-tex">Comp</annotation></semantics></math> is the type of closed terms is that there’s an admissible rule saying that any closed term has type <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Comp</mi></mrow><annotation encoding="application/x-tex">Comp</annotation></semantics></math>. (This rule cannot be represented in HOAS style without some modal trick. The proof is by structural induction on the term, and uses the appropriate computation formation rule in each case. The motive needs to be generalized in order to handle binding forms.)</p>

<p>Returning to the issue of subtyping vs inclusion, one could think of inclusion as the closed special case of subtyping. It’s only because of the restriction to <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Comp</mi></mrow><annotation encoding="application/x-tex">Comp</annotation></semantics></math> that the (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo><mo>→</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(t \in A) \to (t \in B)</annotation></semantics></math>) part corresponds to (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>A</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(t \Vdash A) \Rightarrow (t \Vdash B)</annotation></semantics></math>), as explained in the next section.</p>

<h4 id="presuppositions">Presuppositions</h4>

<p>So if quantifying over <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Comp</mi></mrow><annotation encoding="application/x-tex">Comp</annotation></semantics></math> adds an undesired (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>t</mi><mo>⊩</mo><mi>Comp</mi></mrow><annotation encoding="application/x-tex">t \Vdash Comp</annotation></semantics></math>) requirement, quantifying over <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>⊤</mo></mrow><annotation encoding="application/x-tex">\top</annotation></semantics></math> seems closer, since the requirement (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>t</mi><mo>⊩</mo><mo>⊤</mo></mrow><annotation encoding="application/x-tex">t \Vdash \top</annotation></semantics></math>) is trivial. But in general, (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Π</mi><mi>t</mi><mo>:</mo><mi>D</mi><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo><mo>→</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Pi t:D.(t \in A) \to (t \in B)</annotation></semantics></math>) corresponds to (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>∀</mo><mi>t</mi><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>D</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mi>type</mi><mo>∧</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>A</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\forall t.(t \Vdash D) \Rightarrow ((t \in A)\,type \wedge ((t \Vdash A) \Rightarrow (t \Vdash B)))</annotation></semantics></math>). With (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>t</mi><mo>⊩</mo><mi>Comp</mi></mrow><annotation encoding="application/x-tex">t \Vdash Comp</annotation></semantics></math>), (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mrow><annotation encoding="application/x-tex">(t \in A)\,type</annotation></semantics></math>) is derivable, but in general, its derivability depends on <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math> and <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math>.</p>

<p>So since (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>t</mi><mo>⊩</mo><mo>⊤</mo></mrow><annotation encoding="application/x-tex">t \Vdash \top</annotation></semantics></math>) is trivial, (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Π</mi><mi>t</mi><mo>:</mo><mo>⊤</mo><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo><mo>→</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Pi t:\top.(t \in A) \to (t \in B)</annotation></semantics></math>) corresponds to just (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>∀</mo><mi>t</mi><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mi>type</mi><mo>∧</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>A</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>t</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\forall t.(t \in A)\,type \wedge ((t \Vdash A) \Rightarrow (t \Vdash B))</annotation></semantics></math>), but the (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>∀</mo><mi>t</mi><mo>.</mo><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><mi>A</mi><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mrow><annotation encoding="application/x-tex">\forall t.(t \in A)\,type</annotation></semantics></math>) part is too strong. With relaxed equality, it’s saying that <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Relax</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Relax(A)</annotation></semantics></math> is basically the same as <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo>⊤</mo></mrow><annotation encoding="application/x-tex">\top</annotation></semantics></math>, which is usually not so.</p>

<p>The root of the problem is that (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>f</mi><mo>⊩</mo><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">f \Vdash \Pi x:A.B[x]</annotation></semantics></math>) is not interderivable with (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>f</mi><mspace width="thinmathspace"></mspace><mi>x</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">x:A \vdash f\,x \Vdash B[x]</annotation></semantics></math>) in general, but rather (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>A</mi><mspace width="thinmathspace"></mspace><mi>type</mi><mo stretchy="false">)</mo><mo>∧</mo><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>f</mi><mspace width="thinmathspace"></mspace><mi>x</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(A\,type) \wedge (x:A \vdash f\,x \Vdash B[x])</annotation></semantics></math>). From the perspective of <a class="existingWikiWord" href="/nlab/show/intrinsic+and+extrinsic+views+of+typing">intrinsic typing</a>, it doesn’t make sense to regard (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>A</mi><mspace width="thinmathspace"></mspace><mi>type</mi></mrow><annotation encoding="application/x-tex">A\,type</annotation></semantics></math>) as part of the <em>truth</em> of (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>f</mi><mo>⊩</mo><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">f \Vdash \Pi x:A.B[x]</annotation></semantics></math>). Instead, it’s a “presupposition”: something that has to be true for (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>f</mi><mo>⊩</mo><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">f \Vdash \Pi x:A.B[x]</annotation></semantics></math>) to even <em>make sense</em>.</p>

<p>But as a practical matter, presuppositions don’t validate themselves, so a proof assistant needs some policy on when/how they get validated. If the presuppositions can be checked automatically, this policy is not as visible to the user, but it’s still there. When trying to represent judgment-level assertions as types, the details of the presupposition policy become important.</p>

<p>The point of the presupposition policy is to <em>eliminate</em> the issue of presuppositions from the judgments. In particular any “type checking” one might think of as being necessary for a judgment to “make sense” is at best a useful fiction. Such typing conditions would be presuppositions, which have in fact been eliminated.</p>

<p>The full presupposition of (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>f</mi><mo>⊩</mo><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">f \Vdash \Pi x:A.B[x]</annotation></semantics></math>) is simply (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mrow><annotation encoding="application/x-tex">(\Pi x:A.B[x])\,type</annotation></semantics></math>). That (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>f</mi><mo>⊩</mo><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">f \Vdash \Pi x:A.B[x]</annotation></semantics></math>) is interderivable with (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>A</mi><mspace width="thinmathspace"></mspace><mi>type</mi><mo stretchy="false">)</mo><mo>∧</mo><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>f</mi><mspace width="thinmathspace"></mspace><mi>x</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(A\,type) \wedge (x:A \vdash f\,x \Vdash B[x])</annotation></semantics></math>), and not (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mi>type</mi><mo>∧</mo><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>f</mi><mspace width="thinmathspace"></mspace><mi>x</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\Pi x:A.B[x])\,type \wedge (x:A \vdash f\,x \Vdash B[x])</annotation></semantics></math>), (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mi>type</mi><mo>⇒</mo><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>f</mi><mspace width="thinmathspace"></mspace><mi>x</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\Pi x:A.B[x])\,type \Rightarrow (x:A \vdash f\,x \Vdash B[x])</annotation></semantics></math>), or something even weirder, is due to the presupposition policy the judgment forms are using. (Technically, (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mo stretchy="false">(</mo><mi>Π</mi><mi>x</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mi>type</mi><mo>∧</mo><mo stretchy="false">(</mo><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>f</mi><mspace width="thinmathspace"></mspace><mi>x</mi><mo>⊩</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\Pi x:A.B[x])\,type \wedge (x:A \vdash f\,x \Vdash B[x])</annotation></semantics></math>) is also interderivable, but it redundantly checks (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>x</mi><mo>:</mo><mi>A</mi><mo>⊢</mo><mi>B</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mspace width="thinmathspace"></mspace><mi>type</mi></mrow><annotation encoding="application/x-tex">x:A \vdash B[x]\,type</annotation></semantics></math>).)</p>

<h4 id="strong_vs_weak_negation">Strong vs Weak Negation</h4>

<p>FIXME: Move to a different section:</p>

<p>But we could also use (<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="maruku-mathml"><semantics><mrow><mi>Π</mi><mi>a</mi><mo>:</mo><mi>A</mi><mo>.</mo><mi>a</mi><mo>∈</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">\Pi a:A.a \in B</annotation></semantics></math>). There’s something sneaky about this solution though: it fails to satisfy an additional requirement that you usually want, namely:</p>
<div class="maruku-equation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="maruku-mathml"><semantics><mrow><mo>∀</mo><mi>A</mi><mo>,</mo><mi>B</mi><mo>.</mo><mo stretchy="false">(</mo><mi>A</mi><mspace width="thinmathspace"></mspace><mi>type</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>B</mi><mspace width="thinmathspace"></mspace><mi>type</mi><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">(</mo><mi>A</mi><mo>,</mo><mi>B</mi><mo stretchy="false">)</mo><mspace width="thinmathspace"></mspace><mi>type</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\forall A,B.(A\,type) \Rightarrow (B\,type) \Rightarrow (R(A,B)\,type)</annotation></semantics></math></div>
<p>So it’s inhabited exactly when it should be, but it’s not a type as often as it could be!</p>
</body></html>

</div>

<div class="revisedby">
    <p>
    Last revised on July 24, 2020 at 01:00:44.
    See the <a href="https://ncatlab.org/nlab/history/CompLF/HOAS" style="color: #005c19">history</a> of this page for a list of all contributions to it.
    </p>
</div>

<div class="navigation navfoot">

  <a href="/nlab/edit/CompLF%2FHOAS" accesskey="E" class="navlink" id="edit" rel="nofollow">Edit</a><span class="backintime"><a href="/nlab/revision/CompLF%2FHOAS/7" accesskey="B" class="navlinkbackintime" id="to_previous_revision" rel="nofollow">Back in time</a> (7 revisions)</span><a href="/nlab/show/diff/CompLF%2FHOAS" accesskey="C" class="navlink" id="see_changes" rel="nofollow">See changes</a><a href="/nlab/history/CompLF%2FHOAS" accesskey="S" class="navlink" id="history" rel="nofollow">History</a>
  <a href="https://ncatlab.org/nlab/show/CompLF/HOAS/cite" style="color: black">Cite</a>
  <a href="/nlab/print/CompLF%2FHOAS" accesskey="p" id="view_print" rel="nofollow">Print</a>
    <a href="/nlab/tex/CompLF%2FHOAS" id="view_tex" rel="nofollow">TeX</a>
    <a href="/nlab/source/CompLF%2FHOAS" id="view_source" rel="nofollow">Source</a>

  


</div>


</div> <!-- Content -->

</div> <!-- Container -->

</body>
</html>
